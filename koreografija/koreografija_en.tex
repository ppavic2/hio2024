%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem statement
\begin{statement}[
  problempoints=100,
  timelimit=8 seconds,
  memorylimit=1024 MiB,
]{Koreografija}

Jura: \textit{And Tvrtko, how was the show yesterday?}

Tvrtko: \textit{It was great. The best part was when 1000 dancers lined up
from left to right and started performing the choreography. Each of them had a number
written on their costume between 1 and 1000, and all those numbers were different.
But I have to admit, when I observed them in line, I didn't like their order.}

Jura: \textit{What do you mean?}

Tvrtko: \textit{I observed some consecutive interval of dancers in the line and counted
how many pairs of dancers there were such that the dancer at the lower position had a higher number than the dancer at the higher position.
I like it when the number of such pairs is an odd number.}

Jura: \textit{Oh Tvrtko, you have to see the big picture. I'll handle it. But tell me, how did their numbers go in order?}

Tvrtko: \textit{Hm... I've already forgotten. But I can tell you for each consecutive interval of dancers whether I liked it or not.}

Jura: \textit{So be it. We have no choice but to try to determine their numbers based on that.}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Input
\subsection*{Interaction}
This is an interactive task. Your program needs to establish a dialogue with the program
made by the organizers that responds to the queries asked.

Your program can send queries by writing to standard output. Each query should 
be printed in a separate line and should have the form 
``\texttt{?} \textit{a b}'', where $a$ and $b$  
are natural numbers satisfying $1 \leq a \leq b \leq 1000$. Numbers 
$a$ and $b$ represent the positions of the dancers that define the observed interval. 

After each printed query, your program
should \textit{flush} the output and read the 
\textit{response} to the query from standard input -- a number from the set $\{0, 1\}$ which represents 
Tvrtko's opinion on the given interval. 
The number 1 indicates that Tvrtko liked that interval, while 0 indicates he didn't. \\
\textbf{Your program may send at most $500\,000$ such queries.}


Once your program has reconstructed the numbers on the dancers' costumes, it should print in a separate line to standard output
the symbol $\texttt{!}$ followed by 
printing the requested sequence of numbers as they appear from left to right. 

After that,
your program should again \textit{flush} the output and terminate
execution.

%\textbf{Note:} Via the evaluation system you can download example
%source codes that correctly perform the interaction, including
%output \textit{flush}.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Scoring
\subsection*{Scoring}

Let $Q$ be the maximum number of queries your program sends in all test cases.

If $Q > 500~000$, your program will score 0 points.

Otherwise, the number of points your program will score is based on the following table:

{\renewcommand{\arraystretch}{1.4}
  \setlength{\tabcolsep}{6pt}
  \begin{tabular}{cl}
   Range & Score  \\ \midrule
    $40~000 \leq Q \leq 500~000$ & $30 + 70 \cdot 
    \frac{1/Q - 1/500\,000}{1/40\,000 - 1/500\,000}$ \\
    $Q \leq 40~000$ & 100 \\
\end{tabular}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Examples
\newpage
\subsection*{Sample Interaction}
Although in the task the number of dancers will always be 1000, for illustration purposes we provide an example
interaction when the number of dancers is 4. 

Let's assume the numbers on the dancers' costumes go in order \texttt{2 1 4 3}.

{\renewcommand{\arraystretch}{1.4}
  \setlength{\tabcolsep}{6pt}
  \begin{tabular}{lcl}
    Output & Input & Note \\ \midrule
    \texttt{\frenchspacing? 1 2} & \texttt{1} & Tvrtko counted one pair.\\
    \texttt{\frenchspacing? 1 3} & \texttt{1} & Tvrtko counted one pair. \\
    \texttt{\frenchspacing? 1 4} & \texttt{0} & Tvrtko counted two pairs. \\
    \texttt{\frenchspacing? 2 3} & \texttt{0} & Tvrtko counted zero pairs. \\
    \texttt{\frenchspacing? 2 4} & \texttt{1} & Tvrtko counted one pair. \\
    \texttt{\frenchspacing? 3 4} & \texttt{1} & Tvrtko counted one pair. \\
    \texttt{\frenchspacing!} & & The numbers have been found, they are printed in order. \\
    \texttt{2 1 4 3} & & \\
\end{tabular}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% We're done
\end{statement}

%%% Local Variables:
%%% mode: latex
%%% mode: flyspell
%%% ispell-local-dictionary: "english"
%%% TeX-master: "../hio.tex"
%%% End:

