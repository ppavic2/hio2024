%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem statement
\begin{statement}[
  problempoints=100,
  timelimit=1 sekunda,
  memorylimit=512 MiB,
]{Koreografija}

Jura: \textit{I Tvrtko, kakva je jučer bila predstava?}

Tvrtko: \textit{Bilo je super. Najbolji je dio bio kada se 1000 plesača poredalo
redom s lijeva na desno i krenulo izvoditi koreografiju. Svaki od njih je na kostimu imao zapisan 
broj između 1 i 1000, te su svi ti brojevi bili različiti. 
No moram priznati, kada sam ih promatrao tamo u redu, njihov poredak mi se nije dopao.}

Jura: \textit{Kako to misliš?}

Tvrtko: \textit{Promatrao sam neki uzastopni interval plesača u redu te prebrojao koliko 
postoji parova plesača takvih da je plesač na manjoj poziciji imao veći broj od plesača na većoj poziciji. 
Sviđa mi se kad je broj takvih parova neparan broj.} 

Jura: \textit{Joj Tvrtko, moraš sagledati cijelu sliku. Budem ja procijenio. Nego, reci mi, kako su išli njihovi brojevi redom?}

Tvrtko: \textit{Hm... To sam već zaboravio. No mogu ti reći za svaki uzastopni interval plesača je li mi se sviđao ili ne.} 

Jura: \textit{Tako dakle. Ne preostaje nam drugo nego da na temelju toga pokušamo odrediti njihove brojeve.}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Input
\subsection*{Interakcija}
Ovo je interaktivni zadatak. Vaš program treba uspostaviti dijalog s programom
izrađenim od strane organizatora koji odgovara na postavljene upite.

Vaš program može slati upite pisanjem na standardni izlaz. Svaki upit treba 
biti ispisan u zaseban redak te poprimati oblik 
``\texttt{?} \textit{a b}'', gdje su $a$ i $b$  
prirodni brojevi za koje vrijedi $1 \leq a \leq b \leq 1000$. Brojevi 
$a$ i $b$ predstavljaju pozicije plesača koje određuju promatrani interval. 

Nakon svakog ispisanog upita, vaš program
treba napraviti \textit{flush} izlaza te sa standardnog ulaza pročitati
\textit{odgovor} na upit -- broj iz skupa $\{0, 1\}$ koji predstavlja 
Tvrtkovo mišljenje o navedenom intervalu. 
Broj 1 označava da se Tvrtku taj interval sviđao, a 0 da nije. \\
\textbf{Vaš program smije poslati najviše $500\,000$ ovakvih upita.}


Kada je vaš program rekonstruirao brojeve na kostimima plesača, treba na standardni izlaz 
u zaseban redak ispisati znak $\texttt{!}$ te zatim 
ispisati traženi niz brojeva kako se pojavljuju redom s lijeva na desno. 

Nakon toga,
vaš program ponovno treba napraviti \textit{flush} izlaza i završiti
izvođenje.

%\textbf{Napomena:} Putem sustava za evaluaciju možete preuzeti primjere
%izvornih kodova koji na ispravan način obavljaju interakciju, uključujući
%\textit{flush} izlaza.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Scoring
\subsection*{Bodovanje}

Neka je $Q$ broj upita koje je postavio vaš program.

Ukoliko je $Q > 500~000$, vaš program će osvojiti 0 bodova.

Inače, broj bodova koji će vaš program ostvariti računa se na temelju sljedeće tablice:

{\renewcommand{\arraystretch}{1.4}
  \setlength{\tabcolsep}{6pt}
  \begin{tabular}{cl}
   Raspon & Broj bodova  \\ \midrule
    $40~000 \leq Q \leq 500~000$ & $30 + 70 \cdot 
    \frac{1/Q - 1/500\,000}{1/40\,000 - 1/500\,000}$ \\
    $Q \leq 40~000$ & 100 \\
\end{tabular}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Examples
\newpage
\subsection*{Primjer interakcije}
Iako će u zadatku broj plesača uvijek iznositi 1000, radi ilustracije navodimo primjer 
interakcije kada bi broj plesača iznosio 4. 

Pretpostavimo da brojevi na kostimima plesača idu redom \texttt{2 1 4 3}.

{\renewcommand{\arraystretch}{1.4}
  \setlength{\tabcolsep}{6pt}
  \begin{tabular}{lcl}
    Izlaz & Ulaz & Napomena \\ \midrule
    \texttt{\frenchspacing? 1 2} & \texttt{1} & Tvrtko je prebrojao jedan par.\\
    \texttt{\frenchspacing? 1 3} & \texttt{1} & Tvrtko je prebrojao jedan par. \\
    \texttt{\frenchspacing? 1 4} & \texttt{0} & Tvrtko je prebrojao dva para. \\
    \texttt{\frenchspacing? 2 3} & \texttt{0} & Tvrtko je prebrojao nula parova. \\
    \texttt{\frenchspacing? 2 4} & \texttt{1} & Tvrtko je prebrojao jedan par. \\
    \texttt{\frenchspacing? 3 4} & \texttt{1} & Tvrtko je prebrojao jedan par. \\
    \texttt{\frenchspacing!} & & Brojevi su otkriveni, ispisuju se redom. \\
    \texttt{2 1 4 3} & & \\
\end{tabular}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% We're done
\end{statement}

%%% Local Variables:
%%% mode: latex
%%% mode: flyspell
%%% ispell-local-dictionary: "croatian"
%%% TeX-master: "../hio.tex"
%%% End:
